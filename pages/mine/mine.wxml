<page-meta page-style="{{ show ? 'overflow: hidden;' : '' }}" />

<!-- 背景图案 -->
<view class="bg"></view>

<!-- 用户头像及昵称部分 -->
<view class="user-info">
  <!-- 用户头像 -->
  <view class="avatar">
    <van-image width="100" height="100" src="{{ avatarUrl }}" fit="cover" show-loading show-error lazy-load bind:click="handleGetUserProfile" custom-class="avatar-img" image-class="img"></van-image>
  </view>
  <!-- 用户昵称 -->
  <view class="nickname">
    <view class="nickname-text">{{ nickName }}</view>
  </view>
</view>

<!-- 个人中心详细选项 -->
<van-cell-group inset custom-class="list" bind:tap="handleOpenPopup">
  <van-cell title="个人信息" url="/pages/mine/patient-info/patient-info" is-link icon="user-o" />
  <van-cell title="打卡记录" url="/pages/checkin/checkin" is-link icon="certificate" />
  <van-cell title="训练记录" url="/pages/mine/train-record/train-record" is-link icon="chart-trending-o" />
  <van-cell title="我的积分" is-link data-id="{{ 4 }}" icon="award-o" />
  <van-cell title="积分商城" url="/pages/mine/auction/auction" is-link icon="shopping-cart-o" />
  <van-cell title="问题反馈" is-link data-id="{{ 6 }}" icon="envelop-o" />
  <van-cell title="关于我们" is-link data-id="{{ 7 }}" icon="info-o" />
  <van-cell title="退出登录" title-class="exit-warning" is-link data-id="{{ 8 }}" icon="cross" />
</van-cell-group>

<!-- tabbar 控件 -->
<df-tabbar></df-tabbar>

<!-- 提示框 -->
<van-toast id="van-toast" />

<!-- 弹出模态框 -->
<van-dialog id="van-dialog" />

<van-popup custom-class="popup" show="{{ show }}" position="bottom" safe-area-inset-top closeable lock-scroll bind:close="handleClosePopup">

  <!-- 我的积分 show=4 -->
  <block wx:if="{{ show === 4 }}">
    <view class="credit-title">您目前的积分为</view>
    <view class="credit-count">{{ credit }}</view>
  </block>

  <!-- 问题反馈 show=6 -->
  <block wx:if="{{ show === 6 }}">
    <textarea model:value="{{ feedback }}" placeholder="请输入您想反馈的内容~" maxlength="500" class="feedback-input"></textarea>
    <van-button custom-class="feedback-button" type="default" round block color="#54b8ac" loading="{{ false }}" bind:click="handleFeedback">提交</van-button>
  </block>

  <!-- 关于我们 show=7 -->
  <block wx:if="{{ show === 7 }}">
    <view class="about">
      觅忆（全称：阿尔兹海默症陪伴型记忆恢复训练系统）是在动态脑电和行为控制基础上研发的可视化、综合化、个性化的预防记忆力退化和早期症状恢复的训练系统。
      系统集合病情评定、训练模块、线上医生诊断、每日打卡等多种功能，带来独创的陪伴温暖感受；采用记忆训练、语言训练、认知训练、心理治疗、亲情护理等多种疗法，以注意力、记忆力、计算力、定向力、语言力等多维度指标提升为训练目标，帮助患者减轻病情进展，提高患病老人的生活质量。
    </view>
  </block>

</van-popup>
